export OSPL_HOME=@OpenSplice_HOME@

if [ -f "$OSPL_HOME/release.com" ]; then
  . "$OSPL_HOME/release.com" > /dev/null
else
  export OSPL_TMPL_PATH=$OSPL_HOME/etc/opensplice/idlpp
  _DEFAULT_OSPL_URI=file://$OSPL_HOME/etc/opensplice/config/ospl.xml
  if [ -z "$OSPL_URI" ]; then
    export OSPL_URI=$_DEFAULT_OSPL_URI
  elif [ "$OSPL_URI" != "$_DEFAULT_OSPL_URI" ]; then
    echo "Warning: OSPL_URI was already set to [[$OSPL_URI]]. This will not override it to the default [[$_DEFAULT_OSPL_URI]]. Please make sure this is the config that you want." 1>&2
  fi
  unset _DEFAULT_OSPL_URI
  # detect if running on Darwin platform
  _UNAME=`uname -s`
  _IS_DARWIN=0
  if [ "$_UNAME" = "Darwin" ]; then
    _IS_DARWIN=1
  fi
  unset _UNAME

  if [ $_IS_DARWIN -eq 0 ]; then
    ament_prepend_unique_value LD_LIBRARY_PATH "$OSPL_HOME/lib"
  else
    ament_prepend_unique_value DYLD_LIBRARY_PATH "$OSPL_HOME/lib"
  fi
  unset _IS_DARWIN
fi

export OSPL_INFOFILE="<stdout>"
export OSPL_ERRORFILE="<stderr>"
export OSPL_VERBOSITY=2
